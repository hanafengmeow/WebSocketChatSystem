# ==================== Spring Configuration ====================
# Note: Web auto-configuration is excluded in ChatClientApplication.java @SpringBootApplication annotation
# Web application type is set to NONE in ChatClientApplication.main()
server.port=0
spring.main.web-application-type=none

# Jackson configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.write-null-map-values=true

# ==================== Client Core Configuration ====================
client.ws-base=${CLIENT_WS_BASE:ws://ChatSy-WebSo-c47ZtpwEOcBS-186646094.us-east-1.elb.amazonaws.com}
client.num-users=${CLIENT_NUM_USERS:100000}
client.num-rooms=${CLIENT_NUM_ROOMS:20}
client.total-messages=${CLIENT_TOTAL_MESSAGES:500000}
client.connect-timeout-seconds=${CLIENT_CONNECT_TIMEOUT_SECONDS:10}

# ==================== Message Generation Configuration ====================
# Thread pool for parallel message generation
client.generator.threads=${CLIENT_GENERATOR_THREADS:100}
client.generator.batch-size=${CLIENT_GENERATOR_BATCH_SIZE:50000}

# ==================== Three Queue Sender Configuration ====================
# Queue capacities
client.queue.join-capacity=${CLIENT_QUEUE_JOIN_CAPACITY:150000}
client.queue.text-capacity=${CLIENT_QUEUE_TEXT_CAPACITY:500000}
client.queue.leave-capacity=${CLIENT_QUEUE_LEAVE_CAPACITY:150000}

# Thread pool sizes for sending
client.sender.join-threads=${CLIENT_SENDER_JOIN_THREADS:512}
client.sender.text-threads=${CLIENT_SENDER_TEXT_THREADS:512}
client.sender.leave-threads=${CLIENT_SENDER_LEAVE_THREADS:512}

# Retry settings
client.sender.max-retries=${CLIENT_SENDER_MAX_RETRIES:3}
client.sender.retry-delay-ms=${CLIENT_SENDER_RETRY_DELAY_MS:100}

# ==================== CloudWatch Metrics Configuration ====================
websocketchat.cloudwatch.namespace=WebSocketChatClient
websocketchat.cloudwatch.storage-resolution=1

client.metrics.batch-size=${CLIENT_METRICS_BATCH_SIZE:10000}
client.metrics.publish-interval-ms=${CLIENT_METRICS_PUBLISH_INTERVAL_MS:15000}
client.metrics.initial-delay-ms=${CLIENT_METRICS_INITIAL_DELAY_MS:5000}

# ==================== Async Configuration (for metrics) ====================
websocketchat.async.core-pool-size=5
websocketchat.async.max-pool-size=20
websocketchat.async.queue-capacity=1000
websocketchat.async.thread-name-prefix=client-async-

# ==================== Logging Configuration ====================
client.logs.directory=${CLIENT_LOGS_DIR:./logs}

# ==================== Drain Configuration ====================
# How long to wait for echoback after all users complete (ms)
client.drain.timeout-ms=${CLIENT_DRAIN_TIMEOUT_MS:60000}
# If no echoback progress for this duration, stop draining early (ms)
client.drain.no-progress-ms=${CLIENT_DRAIN_NO_PROGRESS_MS:60000}