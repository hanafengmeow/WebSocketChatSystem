# Common configuration for both server and consumer

# Actuator health endpoint configuration
management.endpoints.web.base-path=/
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=always

# Jackson configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.write-null-map-values=true

# Common WebSocketChat configuration
websocketchat.backend.max-rooms=20
websocketchat.backend.sqs.queue-name-pattern=chat-room-{roomId}
websocketchat.backend.sqs.max-retries=3
websocketchat.backend.sqs.dlq-name=chat-room-dlq
websocketchat.backend.sqs.wait-time-seconds=20
websocketchat.backend.sqs.queue-check-retry-seconds=5
websocketchat.backend.sqs.max-messages-per-poll=10

# CloudWatch configuration
websocketchat.cloudwatch.storage-resolution=1

# Thread pool metrics configuration
# Interval (in milliseconds) for publishing thread pool metrics to CloudWatch
# Default: 60000ms (60 seconds)
# For high-frequency monitoring: 30000ms (30 seconds)
# For reduced costs: 300000ms (5 minutes)
websocketchat.metrics.thread-pool.interval-ms=60000

# Consumer Registry configuration (shared - servers query, consumers register)
websocketchat.consumer.registry.table-name=WebSocketChatConsumerRegistry
websocketchat.consumer.registry.ttl-seconds=120
websocketchat.consumer.registry.heartbeat-interval=30000

# Consumer API configuration (shared - servers need this to connect to consumers)
websocketchat.consumer.api.broadcast.endpoint=/broadcast
websocketchat.consumer.api.broadcast.topic-prefix=/room
